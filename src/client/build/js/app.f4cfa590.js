(function(e){function t(t){for(var a,r,o=t[0],l=t[1],c=t[2],h=0,u=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},i={app:0},n=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0e9f":function(e,t,s){},"0fd3":function(e,t,s){"use strict";s("f145")},"13ca":function(e,t,s){"use strict";s("668b")},3268:function(e,t,s){},3959:function(e,t,s){},"3dfd":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-view")},i=[],n={name:"App",component:{}},r=n,o=s("2877"),l=Object(o["a"])(r,a,i,!1,null,null,null);t["a"]=l.exports},"56d7":function(e,t,s){"use strict";s.r(t),function(e){s("e260"),s("e6cf"),s("cca6"),s("a79d");var t=s("2b0e"),a=s("8c4f"),i=s("3dfd"),n=s("d046"),r=s("7e05"),o=s("aa2f"),l=s("187f"),c=s("a7d0");s("5b3d"),s("7db1");t["default"].use(r["a"]),t["default"].use(o["a"]),t["default"].use(l["a"]),t["default"].config.productionTip=!1,t["default"].config.ignoredElements=["field","block","category","xml","mutation","value","sep"],t["default"].use(a["a"]);var d=new a["a"]({mode:"history",base:e,routes:n["a"]});t["default"].component("PincodeInput",c["a"]),new t["default"]({render:function(e){return e(i["a"])},router:d}).$mount("#app")}.call(this,"/")},"668b":function(e,t,s){},a078:function(e,t){e.exports={localhost:"http://localhost:3000"}},ae7a:function(e,t,s){"use strict";s("d100")},aee1:function(e,t,s){"use strict";s("e7c0")},b53e:function(e,t,s){"use strict";s("3959")},c69e:function(e,t,s){"use strict";s("0e9f")},d046:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"form-signup"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("form",[s("h2",{staticClass:"h2 mb-3 fw-normal text-center"},[e._v("Sign Up")]),s("div",{staticClass:"text-center"},[s("h3",{staticClass:"h3 mb-3 fw-normal text-center"},[e._v("Choose PIN")]),s("PincodeInput",{attrs:{length:4,secure:!0},model:{value:e.choosePIN,callback:function(t){e.choosePIN=t},expression:"choosePIN"}}),s("h3",{staticClass:"h3 mb-3 fw-normal text-center"},[e._v("Comfirm PIN")]),s("PincodeInput",{attrs:{length:4,secure:!0},model:{value:e.confirmPIN,callback:function(t){e.confirmPIN=t},expression:"confirmPIN"}})],1),s("div",{staticClass:"p-3 text-center"},[s("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button"},on:{click:e.create}},[e._v(" Create ")])]),s("div",{staticClass:"p-3 text-center"},[s("b-alert",{attrs:{variant:"success"},model:{value:e.showSuccessAlert,callback:function(t){e.showSuccessAlert=t},expression:"showSuccessAlert"}},[e._v(" "+e._s(e.successAlertMessage)+" ")]),s("b-alert",{attrs:{variant:"danger"},model:{value:e.showErrorAlert,callback:function(t){e.showErrorAlert=t},expression:"showErrorAlert"}},[e._v(e._s(e.errorAlertMessage))])],1)])])]),s("p",{staticClass:"mt-3 mb-3 text-muted text-center"},[e._v("© TileUp")])])},i=[],n=s("bc3a"),r=s.n(n),o=s("a7d0"),l=s("a078"),c={name:"CreateScreen",component:{PincodeInput:o["a"]},data:function(){return{choosePIN:"",confirmPIN:"",showSuccessAlert:!1,successAlertMessage:"Success",showErrorAlert:!1,errorAlertMessage:"Something went wrong"}},methods:{reset:function(){this.choosePIN="",this.confirmPIN=""},displayErrorAlert:function(){this.showErrorAlert=!0},displaySuccessAlert:function(){var e=this;this.showSuccessAlert=!0,setTimeout((function(){e.$router.push("/login")}),5e3)},create:function(){var e=this;if(""===this.confirmPIN||""===this.choosePIN)return this.errorAlertMessage="Please fill in both PIN.",this.displayErrorAlert(),void this.reset();if(4!=this.confirmPIN.length||4!=this.choosePIN.length)return this.errorAlertMessage="PIN must be 4 digits.",this.displayErrorAlert(),void this.reset();if(this.confirmPIN!=this.choosePIN)return this.errorAlertMessage="PIN must be the same.",this.displayErrorAlert(),void this.reset();var t={choosePIN:this.choosePIN,confirmPIN:this.confirmPIN};r.a.post("".concat(l["localhost"],"/user/create"),t).then((function(t){e.successAlertMessage="".concat(t.data.message,". Redirecting to Login in 5 seconds."),e.showErrorAlert=!1,e.displaySuccessAlert()})).catch((function(t){e.errorAlertMessage=t.response.data.message,e.displayErrorAlert(),e.reset()}))}}},d=c,h=(s("ae7a"),s("2877")),u=Object(h["a"])(d,a,i,!1,null,null,null),p=u.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"form-login"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("form",[s("h2",{staticClass:"h3 mb-3 fw-normal text-center"},[e._v("Log in")]),s("h3",{staticClass:"h3 mb-3 fw-normal text-center"},[e._v("PIN")]),s("div",{staticClass:"text-center"},[s("PincodeInput",{attrs:{length:4,secure:!0},model:{value:e.PIN,callback:function(t){e.PIN=t},expression:"PIN"}})],1),s("div",{staticClass:"text-center pt-3"},[s("b-alert",{attrs:{variant:"danger"},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[e._v(e._s(e.alertMessage))])],1),s("div",{staticClass:"p-3 text-center"},[s("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button"},on:{click:e.login}},[e._v(" Login ")])])])]),s("div",[s("b-modal",{ref:"barred-modal",attrs:{size:"xl","no-close-on-backdrop":!0,"no-close-on-esc":!0,"hide-header-close":!0,"hide-footer":"",title:"Barred"}},[s("div",{staticClass:"d-block text-center"},[s("h3",[e._v(e._s(e.barredMessage))]),s("div",{attrs:{id:"time"},domProps:{innerHTML:e._s(e.time)}})])])],1)]),s("p",{staticClass:"mt-3 mb-3 text-muted text-center"},[e._v("© TileUp")])])},f=[],m={name:"LoginScreen",component:{PincodeInput:o["a"]},data:function(){return{showAlert:!1,PIN:"",alertMessage:"Something went wrong",barredMessage:"Barred from logging in, it will unlock in",lockUntilTime:void 0,interval:null,total:0}},computed:{time:function(){return this.seconds<10?this.minutes+":0"+this.seconds:this.minutes+":"+this.seconds},minutes:function(){var e=Math.floor(this.total/1e3/60%60);return e},seconds:function(){var e=Math.floor(this.total/1e3%60);return e}},watch:{PIN:function(e){4===e.length&&this.login()}},methods:{login:function(e){var t=this;if(e&&e.preventDefault(),4!=this.PIN.length)return this.PIN="",this.alertMessage="Please input 4 digits",void this.displayAlert();var s={PIN:this.PIN};r.a.post("".concat(l["localhost"],"/user/login"),s).then((function(e){var s=e.data.data.token;r.a.defaults.headers.common["x-access-token"]=s,sessionStorage.setItem("token",s),t.$router.push("/program")})).catch((function(e){var s=e.response.data;if("data"in s){var a=s.data.lockUntil;t.lockUntilTime=new Date(a),t.startTimer(),t.showBarredModal()}t.alertMessage=s.message,t.PIN="",t.displayAlert()}))},displayAlert:function(){this.showAlert=!0},hideAlert:function(){this.showAlert=!1},showBarredModal:function(){this.$refs["barred-modal"].show()},hideBarredModal:function(){this.$refs["barred-modal"].hide()},startTimer:function(){this.interval=setInterval(this.updateLockUntilTime,1e3)},updateLockUntilTime:function(){var e=new Date;this.total=this.lockUntilTime-Date.parse(e),this.total<0&&(clearInterval(this.interval),this.hideBarredModal(),this.hideAlert())}}},g=m,b=(s("aee1"),Object(h["a"])(g,v,f,!1,null,null,null)),w=b.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-row",[s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"warning",size:"lg"},on:{click:function(t){return e.logout()}}},[e._v("Log Out")])],1),s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"primary",size:"lg"},on:{click:function(t){return e.openDashboard()}}},[e._v("Dashboard")])],1),s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"dark",size:"lg"}},[e._v("Tutorial")])],1),s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"secondary",size:"lg"},on:{click:function(t){return e.openHistory()}}},[e._v("History")])],1),s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"info",size:"lg"}},[e._v("Select Map")])],1),s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"danger",size:"lg"},on:{click:function(t){return e.openResetScreen()}}},[e._v("Reset PIN")])],1),s("b-col",{staticClass:"pt-4"},[s("b-button",{attrs:{pill:"",variant:"success",size:"lg"},on:{click:function(t){return e.sendCode()}}},[e._v("Send to car")])],1)],1),s("BlocklyComponent",{ref:"program",attrs:{id:"blockly1",options:e.options}}),s("b-container",[s("b-modal",{ref:"invalid-seq-model",attrs:{"hide-footer":"",title:e.alertTitle},on:{"update:title":function(t){e.alertTitle=t}}},[s("div",{staticClass:"d-block text-center"},[s("p",[e._v(" "+e._s(e.alertMessage)+" ")]),s("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:e.hideModal}},[e._v("Close Me")])],1)])],1),s("ResetScreen",{ref:"reset-screen"}),s("HistoryScreen",{ref:"history-screen"}),s("DashboardScreen",{ref:"dashboard-screen"})],1)},y=[],S=(s("e9c4"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:"blocklyDiv",staticClass:"blocklyDiv"}),s("xml",{ref:"blocklyToolbox",staticStyle:{display:"none"}},[e._t("default")],2)],1)}),I=[],k=s("54ca"),x=s.n(k),P={name:"BlocklyComponent",props:["options"],data:function(){return{workspace:null}},mounted:function(){var e=this.$props.options||{};e.toolbox||(e.toolbox=this.$refs["blocklyToolbox"]),this.workspace=x.a.inject(this.$refs["blocklyDiv"],e)},methods:{}},A=P,N=(s("13ca"),Object(h["a"])(A,S,I,!1,null,"1392985c",null)),D=N.exports,_=(s("38cf"),s("b7fd"));_["Blocks"]["forward"]={init:function(){this.appendDummyInput().appendField("move").appendField(new _["FieldDropdown"]([["forward","F"],["backward","B"],["left","L"],["right","R"]]),"direction"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260),this.setTooltip("Forward"),this.setHelpUrl("")}},_["JavaScript"]["forward"]=function(e){var t=e.getFieldValue("direction");return t},_["Blocks"]["backward"]={init:function(){this.appendDummyInput().appendField("move").appendField(new _["FieldDropdown"]([["backward","B"],["forward","F"],["left","L"],["right","R"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260),this.setTooltip("Backward"),this.setHelpUrl("")}},_["JavaScript"]["backward"]=function(e){var t=e.getFieldValue("direction");return t},_["Blocks"]["left"]={init:function(){this.appendDummyInput().appendField("move").appendField(new _["FieldDropdown"]([["left","L"],["right","R"],["forward","F"],["backward","B"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260),this.setTooltip(""),this.setHelpUrl("")}},_["JavaScript"]["left"]=function(e){var t=e.getFieldValue("direction");return t},_["Blocks"]["right"]={init:function(){this.appendDummyInput().setAlign(_["ALIGN_CENTRE"]).appendField("move").appendField(new _["FieldDropdown"]([["right","R"],["left","L"],["forward","F"],["backward","B"]]),"direction"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260),this.setTooltip(""),this.setHelpUrl("")}},_["JavaScript"]["right"]=function(e){var t=e.getFieldValue("direction");return t},_["Blocks"]["repeat_direction"]={init:function(){this.appendDummyInput().appendField("repeat move").appendField(new _["FieldDropdown"]([["forward","F"],["backward","B"],["left","L"],["right","R"]]),"direction").appendField(new _["FieldNumber"](1,1,1/0,1),"times").appendField("times"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},_["JavaScript"]["repeat_direction"]=function(e){var t=e.getFieldValue("direction"),s=e.getFieldValue("times");return t.repeat(s)};var B=s("fc06"),O=s.n(B),M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-modal",{ref:"reset-modal",attrs:{"hide-header-close":!0,"hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("h2",{staticClass:"h2 mb-3 fw-normal text-center pb-3"},[e._v("Reset PIN")]),s("form",[s("div",{staticClass:"text-center"},[s("h3",{staticClass:"h3 mb-3 fw-normal text-center"},[e._v("PIN")]),s("PincodeInput",{attrs:{length:4,secure:!0},model:{value:e.PIN,callback:function(t){e.PIN=t},expression:"PIN"}}),s("h3",{staticClass:"h3 mb-3 fw-normal text-center pt-3"},[e._v("New PIN")]),s("PincodeInput",{attrs:{length:4,secure:!0},model:{value:e.choosePIN,callback:function(t){e.choosePIN=t},expression:"choosePIN"}}),s("h3",{staticClass:"h3 mb-3 fw-normal text-center pt-3"},[e._v("Comfirm PIN")]),s("PincodeInput",{attrs:{length:4,secure:!0},model:{value:e.confirmPIN,callback:function(t){e.confirmPIN=t},expression:"confirmPIN"}})],1),s("div",{staticClass:"p-3 text-center"},[s("b-alert",{attrs:{variant:"success"},model:{value:e.showSuccessAlert,callback:function(t){e.showSuccessAlert=t},expression:"showSuccessAlert"}},[e._v(" "+e._s(e.successAlertMessage)+" ")]),s("b-alert",{attrs:{variant:"danger"},model:{value:e.showErrorAlert,callback:function(t){e.showErrorAlert=t},expression:"showErrorAlert"}},[e._v(e._s(e.errorAlertMessage))])],1),s("hr"),s("div",{staticClass:"p-3 text-center"},[s("b-container",[s("b-row",[s("b-col",[s("b-button",{staticClass:"btn btn-primary btn-lg",attrs:{variant:"secondary",type:"button"},on:{click:e.cancel}},[e._v(" Cancel ")])],1),s("b-col",[s("b-button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button",variant:"primary"},on:{click:e.resetPIN}},[e._v(" Reset ")])],1)],1)],1)],1)])])]),s("b-modal",{ref:"result-modal",attrs:{"hide-header-close":!0,"hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("b-alert",{attrs:{show:"",variant:e.resultState}},[s("h4",{staticClass:"alert-heading",class:e.resultState},[e._v(e._s(e.resultTitle))]),s("p",[e._v(e._s(e.resultMessage))]),s("hr")]),s("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:e.hideResultModal}},[e._v("Close Me")])],1)])],1)},E=[],F={name:"reset-screen",data:function(){return{PIN:"",choosePIN:"",confirmPIN:"",showSuccessAlert:!1,successAlertMessage:"Success",showErrorAlert:!1,errorAlertMessage:"Something went wrong",resultState:"success",resultTitle:"Success",resultMessage:"PIN has been changed."}},methods:{showModal:function(){this.$refs["reset-modal"].show()},hideModal:function(){this.$refs["reset-modal"].hide(),this.hideErrorAlert()},showResultModal:function(){this.$refs["result-modal"].show()},hideResultModal:function(){this.$refs["result-modal"].hide()},displayErrorAlert:function(){this.showErrorAlert=!0},hideErrorAlert:function(){this.showErrorAlert=!1},resetField:function(){this.PIN="",this.choosePIN="",this.confirmPIN=""},cancel:function(){this.hideModal(),this.resetField()},changeResult:function(e,t,s){this.resultState=!0===e?"success":"danger",this.resultTitle=t,this.resultMessage=s},resetPIN:function(){var e=this;if(""===this.PIN||""===this.confirmPIN||""===this.choosePIN)return this.errorAlertMessage="Please fill in all fields.",this.displayErrorAlert(),void this.resetField();if(4!=this.PIN.length||4!=this.confirmPIN.length||4!=this.choosePIN.length)return this.errorAlertMessage="PIN must be 4 digits.",this.displayErrorAlert(),void this.resetField();if(this.confirmPIN!=this.choosePIN)return this.errorAlertMessage="New PIN and Confirm PIN must be the same.",this.displayErrorAlert(),void this.resetField();if(this.PIN===this.choosePIN)return this.errorAlertMessage="New PIN and Old PIN cannot be the same.",this.displayErrorAlert(),void this.resetField();var t={PIN:this.PIN,choosePIN:this.choosePIN,confirmPIN:this.confirmPIN},s=sessionStorage.getItem("token");r.a.defaults.headers.common["x-access-token"]=s,r.a.post("".concat(l["localhost"],"/user/reset"),t).then((function(t){e.successAlertMessage="".concat(t.data.message,". Redirecting to Login in 5 seconds."),e.hideModal(),e.changeResult(!0,"Success",t.data.message),e.showResultModal()})).catch((function(t){e.errorAlertMessage=t.response.data.message,e.hideModal(),e.changeResult(!1,"Error",t.response.data.message),e.showResultModal()})),this.resetField(),this.hideErrorAlert()}}},R=F,T=Object(h["a"])(R,M,E,!1,null,null,null),L=T.exports,V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-modal",{ref:"history-modal",attrs:{size:"xl","hide-header-close":!0,"hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("h1",{staticClass:"display-1"},[e._v("History")]),s("p",[e._v("F: Forward B: Backward R: Right L: Left")]),e.noHistory?s("div",[s("b-alert",{attrs:{show:"",variant:"warning"}},[s("h4",{staticClass:"alert-heading"},[e._v("No History found")]),s("hr"),s("p",[e._v(" Seems like an instruction has not been send before. Please try again after Sending to car. ")])])],1):e._e(),s("b-table",{attrs:{hover:"",items:e.items}})],1),s("div",{staticClass:"text-center"},[s("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:e.hideModal}},[e._v("Close Me")])],1)])],1)},z=[],G=(s("d3b7"),s("159b"),s("fb6a"),s("fce4")),H=s("1086");G["a"].addDefaultLocale(H);var j,Y,U,$=new G["a"]("en-SG"),J={data:function(){return{items:[],noHistory:!0}},methods:{showModal:function(){this.fetchHistory(),this.$refs["history-modal"].show()},hideModal:function(){this.$refs["history-modal"].hide()},fetchHistory:function(){var e=sessionStorage.getItem("history");if(null!==e){this.noHistory=!1;var t=[];e=JSON.parse(e),e.slice().reverse().forEach((function(e){t.push({time_sent:$.format(new Date(e.now)),sequence:e.sequence})})),this.items=t}else this.noHistory=!0}}},q=J,X=Object(h["a"])(q,V,z,!1,null,null,null),W=X.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-modal",{ref:"dashboard-modal",attrs:{id:"dashboardModal",size:"xl","hide-header-close":!0,"hide-footer":""}},[s("div",{staticClass:"d-block text-center"},[s("h1",{staticClass:"display-3"},[e._v("Dashboard")])]),s("BasicBoardComponent",{directives:[{name:"show",rawName:"v-show",value:"BasicBoardComponent"===e.currentBoardComponent,expression:"currentBoardComponent === 'BasicBoardComponent'"}],staticClass:"board",attrs:{sensorData:e.newSensorData}}),s("DetailedBoardComponent",{directives:[{name:"show",rawName:"v-show",value:"DetailedBoardComponent"===e.currentBoardComponent,expression:"currentBoardComponent === 'DetailedBoardComponent'"}],staticClass:"board",attrs:{sensorData:e.newSensorData}}),s("div",{staticClass:"text-center"},[s("b-container",[s("b-row",[s("b-col",[s("b-button",{staticClass:"mt-3",attrs:{variant:"primary"},on:{click:e.toggleBoard}},[e._v(" View "+e._s(e.currentButtonText)+" ")])],1),s("b-col",[s("b-button",{staticClass:"mt-3",attrs:{variant:"danger",block:""},on:{click:e.hideModal}},[e._v("Close Me")])],1)],1)],1)],1)],1),s("b-modal",{ref:"error-modal",attrs:{"hide-footer":"",title:e.alertTitle},on:{"update:title":function(t){e.alertTitle=t}}},[s("div",{staticClass:"d-block text-center"},[s("p",[e._v(" "+e._s(e.alertMessage)+" ")]),s("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:e.hideErrorModal}},[e._v("Close Me")])],1)])],1)},Q=[],Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Basic")]),s("b-row",[s("b-col",[s("b-row",{attrs:{"align-v":"baseline"}},[s("b-col",{staticStyle:{"font-size":"2rem"}},[s("b-table",{attrs:{stacked:"",hover:"",items:e.currentExecution}})],1),s("div",{staticClass:"w-100"}),s("b-col",{staticStyle:{"font-size":"2rem"}},[s("b-table",{attrs:{hover:"",items:e.currentSensorData}}),s("b-button",{on:{click:e.moveForward}},[e._v("F")]),s("b-button",{on:{click:e.moveBack}},[e._v("B")]),s("b-button",{on:{click:e.moveLeft}},[e._v("L")]),s("b-button",{on:{click:e.moveRight}},[e._v("R")])],1)],1)],1),s("b-col",[s("div",{staticClass:"w-100 h-100",attrs:{id:"canvasParent"}},[s("canvas",{attrs:{id:"map"}})])])],1)],1)},ee=[],te=(s("99af"),s("cb29"),{props:{sensorData:Object,canvasOrigin:Object},created:function(){window.addEventListener("unload",(function(){sessionStorage.removeItem("mapData"),sessionStorage.removeItem("canvasOrigin")}))},mounted:function(){var e=this;this.smallCar=new Image,this.smallCar.src=s("fdcc"),this.$root.$on("bv::modal::shown",(function(t,s){"dashboardModal"===s&&(e.fetchCanvasOrigin(),e.initCanvas())}))},beforeDestroy:function(){this.saveCanvasOrigin()},data:function(){return{currentExecution:[{executing:"Left",next:"FFFLRFF"}],currentSensorData:[],c:null,ctx:null,vueCanvas:null,canvasStore:null,colorReadyToRender:!1,canvasTileSize:30,smallCar:null,canvasOriginX:null,canvasOriginY:null}},watch:{$props:{handler:function(){this.parseSensorData()},deep:!0,immediate:!0}},methods:{parseSensorData:function(){var e=[],t=this.sensorData,s={r:"Red",g:"Green",b:"Blue"},a={r:"danger",g:"success",b:"primary"},i="";t.ObstacleDistance<20&&(i="danger"),e.push({type:"Speed",data:"".concat(t.SpeedLeft," rpm ⚡ ").concat(t.SpeedRight," rpm")},{type:"Obstacle",data:"".concat(t.ObstacleDistance," cm"),_rowVariant:i},{type:"Color",data:s[t.Color],_rowVariant:a[t.Color]}),this.currentSensorData=e},initCanvas:function(){var e=this;this.c=document.getElementById("map"),this.ctx=this.c.getContext("2d"),this.vueCanvas=this.ctx,this.c.style.width="100%",this.c.style.height="100%",this.c.width=this.c.offsetWidth,this.c.height=this.c.offsetHeight;var t=sessionStorage.getItem("mapData")||null;t?this.getImage(t).then((function(t){e.vueCanvas.drawImage(t,0,0)})).catch((function(e){console.log(e)})):this.vueCanvas.transform(1,0,0,-1,0,this.vueCanvas.height)},saveCanvasOrigin:function(){var e=this.c.toDataURL();sessionStorage.setItem("mapData",e),sessionStorage.setItem("canvasOrigin",JSON.stringify({X:this.canvasOriginX,Y:this.canvasOriginY}))},fetchCanvasOrigin:function(){var e=JSON.parse(sessionStorage.getItem("canvasOrigin"))||null;e?(this.canvasOriginX=e.X,this.canvasOriginY=e.Y):(this.canvasOriginX=100,this.canvasOriginY=300)},moveForward:function(){this.vueCanvas.beginPath(),this.vueCanvas.rect(this.canvasOriginX,this.canvasOriginY,this.canvasTileSize,this.canvasTileSize),this.vueCanvas.fillStyle="#32CD30",this.vueCanvas.fill(),this.vueCanvas.lineWidth=3,this.vueCanvas.strokeStyle="black",this.vueCanvas.stroke(),this.canvasOriginY-=30,this.vueCanvas.drawImage(this.smallCar,this.canvasOriginX,this.canvasOriginY)},moveBack:function(){this.vueCanvas.beginPath(),this.vueCanvas.rect(this.canvasOriginX,this.canvasOriginY,this.canvasTileSize,this.canvasTileSize),this.vueCanvas.fillStyle="#FF0000",this.vueCanvas.fill(),this.vueCanvas.lineWidth=3,this.vueCanvas.strokeStyle="black",this.vueCanvas.stroke(),this.canvasOriginY+=30,this.vueCanvas.drawImage(this.smallCar,this.canvasOriginX,this.canvasOriginY)},moveLeft:function(){this.vueCanvas.beginPath(),this.vueCanvas.rect(this.canvasOriginX,this.canvasOriginY,this.canvasTileSize,this.canvasTileSize),this.vueCanvas.fillStyle="#0047AB",this.vueCanvas.fill(),this.vueCanvas.lineWidth=3,this.vueCanvas.strokeStyle="black",this.vueCanvas.stroke(),this.canvasOriginX-=30,this.vueCanvas.drawImage(this.smallCar,this.canvasOriginX,this.canvasOriginY)},moveRight:function(){this.vueCanvas.beginPath(),this.vueCanvas.rect(this.canvasOriginX,this.canvasOriginY,this.canvasTileSize,this.canvasTileSize),this.vueCanvas.fillStyle="#0047AB",this.vueCanvas.fill(),this.vueCanvas.lineWidth=3,this.vueCanvas.strokeStyle="black",this.vueCanvas.stroke(),this.canvasOriginX+=30,this.vueCanvas.drawImage(this.smallCar,this.canvasOriginX,this.canvasOriginY)},getImage:function(e){return new Promise((function(t,s){var a=new Image;a.onload=function(){t(a)},a.onerror=function(){s(e)},a.src=e}))}}}),se=te,ae=(s("b53e"),Object(h["a"])(se,Z,ee,!1,null,"b6f35a2e",null)),ie=ae.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Detailed")]),s("b-container",[s("b-row",[s("b-col",[s("div",{staticClass:"panel panel-primary"},[s("div",{staticClass:"panel-heading text-center"},[s("h3",{staticClass:"panel-title"},[e._v("Color Intensity")])]),s("div",{staticClass:"panel-body"},[s("div",{attrs:{id:"chart_container"}},[s("div",{staticClass:"y_axis",attrs:{id:"cy_axis"}}),s("div",{ref:"colorpanel",staticClass:"demo_chart"})])]),s("div",{staticClass:"panel-footer"},[e.displayedColorValues.length>0?s("p",[s("small",[s("span",{style:{color:e.dvColors.Red}},[e._v("Red: "+e._s(e.displayedColorValues[0].Red)+" ")]),s("span",{style:{color:e.dvColors.Green}},[e._v(" Green: "+e._s(e.displayedColorValues[0].Green)+" ")]),s("span",{style:{color:e.dvColors.Blue}},[e._v(" Blue: "+e._s(e.displayedColorValues[0].Blue)+" ")])])]):e._e()])])]),s("b-col",[s("div",{staticClass:"panel panel-primary"},[s("div",{staticClass:"panel-heading text-center"},[s("h3",{staticClass:"panel-title"},[e._v("Obstacle Distance")])]),s("div",{staticClass:"panel-body"},[s("div",{attrs:{id:"chart_container"}},[s("div",{staticClass:"y_axis",attrs:{id:"oy_axis"}}),s("div",{ref:"obstaclepanel",staticClass:"demo_chart"})])]),s("div",{staticClass:"panel-footer"},[e.displayedObstacleValues.length>0?s("p",[s("small",[s("span",{style:{color:e.dvColors.Obstacle}},[e._v("Distance: "+e._s(e.displayedObstacleValues[0].ObstacleDistance)+" cm ")])])]):e._e()])])]),s("div",{staticClass:"w-100"}),s("b-col",[s("div",{staticClass:"panel panel-primary"},[s("div",{staticClass:"panel-heading text-center"},[s("h3",{staticClass:"panel-title"},[e._v("Speed")])]),s("div",{staticClass:"panel-body"},[s("div",{attrs:{id:"chart_container"}},[s("div",{staticClass:"y_axis",attrs:{id:"sy_axis"}}),s("div",{ref:"speedpanel",staticClass:"demo_chart"})])]),s("div",{staticClass:"panel-footer"},[e.displayedSpeedValues.length>0?s("p",[s("small",[s("span",{style:{color:e.dvColors.SpeedLeft}},[e._v("Left: "+e._s(e.displayedSpeedValues[0].SpeedRight)+" RPM ")]),s("span",{style:{color:e.dvColors.SpeedRight}},[e._v(" Right: "+e._s(e.displayedSpeedValues[0].SpeedLeft)+" RPM ")])])]):e._e()])])]),s("b-col")],1)],1)],1)},re=[],oe=(s("b680"),s("4a40")),le=s.n(oe),ce=(s("a978"),{props:{sensorData:Object},data:function(){return{colorSeries:[],obstacleSeries:[],speedSeries:[],chartReadyToRender:!1,renderEveryNth:1,updateInterval:1,streamFrequency:1,messageIndex:0,displayedColorValues:[],displayedObstacleValues:[],displayedSpeedValues:[],dvColors:{Red:"#cb503a",Green:"#72c039",Blue:"#0047AB",Obstacle:"5C5553",SpeedLeft:"#cb503a",SpeedRight:"#72c039"}}},watch:{$props:{handler:function(){this.parseSensorData(),this.updateChartDisplayedValue(),this.updateChart()},deep:!0,immediate:!0}},mounted:function(){this.initChart()},methods:{updateDisplayedValues:function(){this.updateDisplayedColorValues(),this.updateDisplayedObstacleValues(),this.updateDisplayedSpeedValues()},parseSensorData:function(){var e={};for(var t in this.sensorData)e[t]=this.sensorData[t];this.colorSeries.push({Red:e.Red,Green:e.Green,Blue:e.Blue}),this.obstacleSeries.push({ObstacleDistance:e.ObstacleDistance}),this.speedSeries.push({SpeedLeft:e.SpeedLeft,SpeedRight:e.SpeedRight})},initChart:function(){var e=this;j=new le.a.Graph({element:this.$refs.colorpanel,width:"500",height:"300",renderer:"line",min:-10,max:800,series:new le.a.Series.FixedDuration([{name:"Red",color:"#EC644B"},{name:"Blue",color:"#446CB3"},{name:"Green",color:"#44B355"}],void 0,{timeInterval:this.updateInterval,maxDataPoints:100,timeBase:(new Date).getTime()/1e3})}),new le.a.Graph.Axis.Y({graph:j,orientation:"left",tickFormat:function(e){return e.toFixed(1)},ticks:5,element:document.getElementById("cy_axis")}),Y=new le.a.Graph({element:this.$refs.obstaclepanel,width:"500",height:"300",renderer:"line",min:-10,max:200,series:new le.a.Series.FixedDuration([{name:"One",color:"#EC644B"}],void 0,{timeInterval:this.updateInterval,maxDataPoints:100,timeBase:(new Date).getTime()/1e3})}),new le.a.Graph.Axis.Y({graph:Y,orientation:"left",tickFormat:function(e){return e.toFixed(1)},ticks:5,element:document.getElementById("oy_axis")}),U=new le.a.Graph({element:this.$refs.speedpanel,width:"500",height:"300",renderer:"line",min:-10,max:60,series:new le.a.Series.FixedDuration([{name:"Left",color:"#EC644B"},{name:"Right",color:"#446CB3"}],void 0,{timeInterval:this.updateInterval,maxDataPoints:100,timeBase:(new Date).getTime()/1e3})}),new le.a.Graph.Axis.Y({graph:U,orientation:"left",tickFormat:function(e){return e.toFixed(1)},ticks:5,element:document.getElementById("sy_axis")}),this.resizeChart(j),this.resizeChart(Y),this.resizeChart(U),window.addEventListener("resize",(function(){e.resizeChart(j),e.resizeChart(Y),e.resizeChart(U)})),this.chartReadyToRender=!0},resizeChart:function(e){e.configure({width:this.$refs.colorpanel.clientWidth}),e.render()},updateChart:function(){this.chartReadyToRender&&(this.insertDatapoints(this.colorSeries,j),this.insertDatapoints(this.obstacleSeries,Y),this.insertDatapoints(this.speedSeries,U),this.colorSeries=[],this.obstacleSeries=[],this.speedSeries=[])},insertDatapoints:function(e,t){for(var s=0;s<e.length;s++){var a={};for(var i in e[s])a[i]=e[s][i];t.series.addData(a)}t.render()},updateChartDisplayedValue:function(){this.messageIndex==this.streamFrequency?this.messageIndex=0:(this.messageIndex,this.messageIndex++),this.displayedColorValues=this.colorSeries,this.displayedObstacleValues=this.obstacleSeries,this.displayedSpeedValues=this.speedSeries}}}),de=ce,he=(s("c69e"),Object(h["a"])(de,ne,re,!1,null,"fae0790e",null)),ue=he.exports,pe={components:{BasicBoardComponent:ie,DetailedBoardComponent:ue},data:function(){return{alertMessage:"Something went wrong",alertTitle:"Watch out!",currentBoardView:"Basic",currentButtonText:"Detailed",BoardViews:["Basic","Detailed"],currentExecution:[{executing:"Left",next:"FFFLRFF"}],currentSensorData:[],newSensorData:{},interval:null,c:null,ctx:null}},computed:{currentBoardComponent:function(){return this.currentBoardView+"BoardComponent"}},methods:{toggleBoard:function(){"Basic"===this.currentBoardView?(this.currentBoardView="Detailed",this.currentButtonText="Basic"):(this.currentBoardView="Basic",this.currentButtonText="Detailed")},showModal:function(){this.getSensorData(),this.$refs["dashboard-modal"].show(),this.interval=setInterval(this.getSensorData,1e3)},hideModal:function(){this.$refs["dashboard-modal"].hide(),this.currentBoardView="Basic",this.currentButtonText="Detailed",clearInterval(this.interval),this.interval=null},showErrorModal:function(){this.$refs["error-modal"].show()},hideErrorModal:function(){this.$refs["error-modal"].hide()},getSensorData:function(){var e=this,t=sessionStorage.getItem("token");r.a.defaults.headers.common["x-access-token"]=t,r.a.get("".concat(l["localhost"],"/program/sensorData")).then((function(t){var s=t.data.data.sensorData,a={O:"ObstacleDistance",R:"Red",G:"Green",B:"Blue",C:"Color",SL:"SpeedLeft",SR:"SpeedRight"},i={};for(var n in s)i[a[n]]=s[n];i[a["SL"]]=Math.floor(5+46*Math.random()),i[a["SR"]]=Math.floor(5+46*Math.random()),i.time=Date.now(),e.newSensorData=i})).catch((function(t){e.alertTitle="Error",e.alertMessage=t.response.data.message,e.hideModal(),e.showErrorModal()}))}}},ve=pe,fe=(s("fb9d"),Object(h["a"])(ve,K,Q,!1,null,"7a466904",null)),me=fe.exports,ge={name:"app",components:{BlocklyComponent:D,ResetScreen:L,HistoryScreen:W,DashboardScreen:me},data:function(){return{code:"",options:{media:"media/",grid:{spacing:25,length:3,colour:"#ccc",snap:!0},toolbox:'<xml>\n            <category name="Movement" colour="%{BKY_VARIABLES_HUE}">\n              <block type="forward"></block>\n              <block type="backward"></block>\n              <block type="left"></block>\n              <block type="right"></block>\n              <block type="repeat_direction"></block>\n            </category>\n        </xml>'},alertMessage:"Something went wrong",alertTitle:"Watch out!"}},methods:{hasWhiteSpace:function(e){return e.indexOf("\n")>=0},sendCode:function(){var e=this,t=O.a.workspaceToCode(this.$refs["program"].workspace);if(t){if(this.hasWhiteSpace(t))return this.alertTitle="Invalid Sequence",this.alertMessage="Please ensure all blocks are connected.",void this.showModal();var s={sequence:t},a=sessionStorage.getItem("token");r.a.defaults.headers.common["x-access-token"]=a,r.a.post("".concat(l["localhost"],"/program/sendSequence"),s).then((function(s){console.log(s.data),e.saveToHistory(t),e.openDashboard(),e.$refs["program"].workspace.clear()})).catch((function(t){e.alertTitle="Error",e.alertMessage=t.response.data.message,"Failed to verify token"===e.alertMessage&&(e.alertMessage+=" You will be redirected to login again.",e.goToLogin()),e.showModal()}))}else this.alertTitle="No sequence in workspace",this.alertMessage="Please put some blocks into the workspace.",this.showModal()},showModal:function(){this.$refs["invalid-seq-model"].show()},hideModal:function(){this.$refs["invalid-seq-model"].hide()},logout:function(){sessionStorage.removeItem("token"),this.$router.push("/login")},goToLogin:function(){var e=this;sessionStorage.removeItem("token"),setTimeout((function(){e.$router.push("/login")}),3e3)},openResetScreen:function(){this.$refs["reset-screen"].showModal()},openHistory:function(){this.$refs["history-screen"].showModal()},saveToHistory:function(e){var t=sessionStorage.getItem("history"),s=Date.now();if(null!==t)t=JSON.parse(t),t.push({now:s,sequence:e}),sessionStorage.setItem("history",JSON.stringify(t));else{var a=[];a.push({now:s,sequence:e}),sessionStorage.setItem("history",JSON.stringify(a))}},openDashboard:function(){this.$refs["dashboard-screen"].showModal()}}},be=ge,we=(s("0fd3"),Object(h["a"])(be,C,y,!1,null,null,null)),Ce=we.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Not Found")]),s("p",[e._v(" Oops, we could not find that page. Try going "),s("router-link",{attrs:{to:{name:"program"}}},[e._v("Program")])],1)])},Se=[],Ie={},ke=Object(h["a"])(Ie,ye,Se,!1,null,null,null),xe=ke.exports;function Pe(e,t,s){var a=!1;sessionStorage.getItem("token")&&(a=!0),a?s():s("/login")}function Ae(e,t,s){var a=!1;sessionStorage.getItem("token")&&(a=!0),a?s("/program"):s()}function Ne(e,t,s){r.a.get("".concat(l["localhost"],"/user/exist")).then((function(){s("/login")})).catch((function(){s("/create")}))}var De=[{path:"/",beforeEnter:Ne},{path:"/create",name:"create",component:p,meta:{title:"Sign Up"}},{path:"/login",name:"login",beforeEnter:Ae,component:w,meta:{title:"Log In"}},{path:"/program",name:"program",beforeEnter:Pe,component:Ce,meta:{title:"Program"}},{path:"*",component:xe}];t["a"]=De},d100:function(e,t,s){},e7c0:function(e,t,s){},f145:function(e,t,s){},fb9d:function(e,t,s){"use strict";s("3268")},fdcc:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABXxJREFUWEetV11oHFUYPbN/k90mJgb/qJpsgqDEmj4oFn0TC4ogebONabOFQojmYekuJptoCFiabE3SUksVIg1GEmifBEWQUn3xoVB8iYKJIllrSVpqa9LN7uZ3d+Tc7L25MzubKHhhSeabb+455/ubOwbsqwLAqsMWAODR7T09PYv5fL5mZGTEoG8ikbAsy1o6ffr0gwDc9qAtD2DDsbdfbFBcVQCWHQ7BEydOLJimWaPbI5EIJiYmkEwmFYGuri6cPXsWgQD5qrWYTCbri8BOYZUAMpJACXg8HqcqRKNR1NXVobGxUew6PT2NqqoqTE5OosGYwdLiEhZrXkJLS4uwS7+5uTnMzMxgfHwcPp9PkXWKJYGSkBF8YGBAbMglNy0UCvB4PODmly5dwiNrPyN9/z7SNS+ivb1d+fEZ+s7OzqKigtsDvb29koRNrJ4C4Ujw/v5+VFdX28Clcknm0KFDeO+gD7/P/Ykv5/bi8uXLwp/klpeX0dzcDMMwxDVXPp9Hd3c3zpw5Y8N0EgjFYrHs6OioSiIBqYZK1tfXlZ0E3nm5gOWle5j85WFFgL6maWJjY6veJAGSGhwcdKbC0AmEAHgTiUR6aGhIAfHB/fv322qTm8bjcbz/Rgi3Fm4JAnwmHA4L1fw5wZlOLQ28TSdTEggC8LEL2FKSAMGddSDBGcp7Vz+wSGBf+0UjFotZp06dQlNTkyu4ow7Y1nuIRwLsG1NvQZLo6+tT4Lp8Kg8EAqOxV4wlr9d7kgTuLOZ6vv7jsb2maUad0ZMCNPUKXIahpAuohv2sbzY8PIzbt28jk8nsGRsby1E9N2AR+rwePH/8c6OjoyNUW1ubra2tRWdnpxJAcK5kMklw9r+aNyVdAEC1CSMh1a+srHx37ty5g/KaBDK5ddy9cwdmwCvSIO9Fo9GrwWDwVXldHFg25fKek4DbNKRvif3GV92W3+fB33f/EntpBNz2cAXnDCo7isUYZKy0QpSsafP7/aI1b84vqBLJZDKorGSEtxe3yWazaHrmaVexZUcxCewGThhJQIJ3/XRNoZ/fdwC5XE6QqnvicafYDADLdRRzh3Q6bckKdlMubSSgK5cErIKFj55qVhHRCDBFAlx2gS1kxYsqy7LS+g097Lp95tffyoZdT0eRgA28HAFRRLLN6MRq9/k8qAhwVm0v2jmK9VWwLKysbWJPhd9m39d+8QFd+a5dIAkQhNVuuoBXhgJiFMtVDjy7uoEDHV+wE1RbF58p3wWyz3cC5yaSAKs956Kc4CHTj+ci23NCplmOYl679nm5sFO5XCSwk3KC892kDyodzwiHw5Z8e6lQFgq49mlr2bDryZ2fX3DNuVQu37dvDnwvHpOHGlUDbUcitrzwPc5Tz4XjYeEzMfWt+Lu2kYfp9yrsSNvrQvlc6mZJwWWGryPk8cATf0H5D13ZFGcEDjB9GToBCe71evHxsScVASc4bxxtfQ251Y2SLqDy4IVp8bI3Is8CD/FND3z4zUoJOKNhNDQ0iAiIC+0w8eNnbeJBdoGe8y1fS4A7u0APu3UjDaOenQfQfnjoB5vy4qTfIuAEpycJuIKz2le2wPUucOZcotHOmSBrgHaC88dUG4dbj4gIMOz6Gnzr0R2VS192wW7g9GUNcG1ubgpwWQtG69tHLTLRF2vh/LG6T3x+37vSrodd9+WBRLaabpfKi7b+oSubJ53gvKdqYBto6+yfSqX0txf/t51kiv4ls12z276y2O4y7DpRGwG9RzUC5Q4T/xocQLC+vj7njDQJqTZ09ujU5ARV/x/g4rjfdiRie7tKPEGAueH3m76mJidKDpD/NexULo/7znmjitBtFBMolUrxYecXrdunN913/ayX80aEXfse+geT6v0bbPtMiwAAAABJRU5ErkJggg=="}});
//# sourceMappingURL=app.f4cfa590.js.map